<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Demo test</title>
      <!-- Include Bootstrap CSS -->
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <style>
      table {
        border-collapse: collapse;
        width: 100%; 
        /* Set width to 100% to fit on A4 page */
      }

      table,
      th,
      td {
        border: 1px solid black;
      }

      .header-container img {
        height: 200px;
        margin: 30px 10px; /* Add margin to both left and right sides */
      }
      @page {
        margin-top: 10px; /* Add top margin to all pages */
      }

      .header-container {
        text-align: center;
        position: relative;
        margin-bottom: 30px;
        /* Add bottom margin */
        border-top: 1px solid black;
        border-left: 1px solid black;
        border-right: 1px solid black;
        border-bottom: 1px solid black;
        page-break-inside: avoid;
      }

      .header-container .img-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .header-container h1 {
        display: inline-block;
        /* Display h1 as inline block */
        vertical-align: middle;
        /* Align h1 vertically in the middle */
      }

      th,
      td {
        text-align: center;
        /* Center-align content in cells */
        padding: 8px;
        /* Add padding for better readability */
      }

      td:first-child,
      th:first-child {
        min-width: 120px;
        /* Set minimum width for the Date-time column */
      }

      th:nth-child(2),
      td:nth-child(2) {
        width: 8%;
        /* Adjust width for Gate 1 column */
      }

      /* Add similar styles for columns 3 to 20 */

      .page-break {
        page-break-before: always;
      }
      .img-size {
        width: 100px;
        height: 100px;
      }

      .page-container {
        page-break-before: always;
      }
      .mt-40 {
            margin-top: 100px;
        }
    </style>
  </head>
  <body>
    <% for (let pageIndex = 0; pageIndex < Math.ceil(mergedDataWithoutPagination.length / 22); pageIndex++) { %>
   
    <div class="header-container">
        <div class="row">
            <div class="col-md-2">
                <img src="http://192.168.1.106:3002/assets/logo2.jpeg" class="img-size" alt="Placeholder Image">
            </div>
            <div class="col-md-8 mt-40">
                <h1>SRSP HR Kakatiya & Saraswati canal Gate Report</h1>
            </div>
            <div class="col-md-2">
                <img src="https://www.chetascontrol.com/images/ind2.jpg" class="img-size" alt="Placeholder Image">
            </div>
        </div>
        <div class="img-container">
        </div>
    </div>

    <table>
      <thead>
        <tr>
          <th>Date-time</th>
          <th>Kakatiya gate 1 Opening (Feet)</th>
          <th>Kakatiya gate 1 Discharge (C/S)</th>
          <th>Kakatiya gate 2 Opening (Feet)</th>
          <th>Kakatiya gate 2 Discharge (C/S)</th>
          <th>Kakatiya gate 3 Opening (Feet)</th>
          <th>Kakatiya gate 3 Discharge (C/S)</th>
          <th>Kakatiya gate 4 Opening (Feet)</th>
          <th>Kakatiya gate 4 Discharge (C/S)</th>
          <th>Kakatiya Total Discharge (C/S)</th>
          <th>Saraswati gate 1 Opening (Feet)</th>
          <th>Saraswati gate 1 Discharge (C/S)</th>
          <th>Saraswati gate 2 Opening (Feet)</th>
          <th>Saraswati gate 2 Discharge (C/S)</th>
          <th>Saraswati Total Discharge (C/S)</th>
        </tr>
      </thead>
      <tbody>
        <% for (let i = pageIndex * 22; i < (pageIndex + 1) * 22 && i < mergedDataWithoutPagination.length; i++)
        { %>
        <tr>
          <td>
            <%= new Date(mergedDataWithoutPagination[i].dateTime).toLocaleString('en-US', { year: 'numeric',
            month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit' }).replace(/(\d+)\/(\d+)\/(\d+),/g,
            '$3-$1-$2T' ) %>
          </td>
          <td><%= mergedDataWithoutPagination[i].hrkGate1Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate1Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate2Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate2Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate3Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate3Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate4Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrkGate4Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].kakatiyaTotalDischarge.toFixed(3) %></td>
          
          <td><%= mergedDataWithoutPagination[i].hrsGate1Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrsGate1Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrsGate2Position.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].hrsGate2Discharge.toFixed(3) %></td>
          <td><%= mergedDataWithoutPagination[i].saraswatiTotalDischarge.toFixed(3) %></td></tr>
        <% } %>
      </tbody>
    </table>

    <% } %>
  </body>
</html>